<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>[no-dogma] HUB</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <div id="outer_main">
        <div id="side_panel">
            <div id="app_title">
                [no-dogma] HUB
                <div id="app_subtitle">share haxor content</div>
                <div id="options">
                    <div class="option">software</div>
                    <div class="option">diagnostics</div>
                    <div class="option">configure wifi</div>
                </div>
            </div>
        </div>
        <div id="main_body">
            <!--<div id="main_body_title">Configure Wifi</div>
            <div class="status_title">
                Is Connected To a Network
                <div class="status_subtitle">false</div>
            </div>
            <div class="status_title">
                Is Connected To the Internet
                <div class="status_subtitle">false</div>
            </div>
            <div class="configure_wifi">
                <div>wifi access point name: <input /></div>
                <div>wifi access point password: <input /></div>
                <button>configure</button>
            </div>-->
            <!--
            <div id="main_body_title">Diagnostics</div>
            <div class="status_title">
                Installed Software
                <div class="status_subtitle">automate</div>
            </div>
            <div class="status_title">
                Software Container
                <div class="status_subtitle">dockerhub.com/BradfordMedeiros/automate_core_arm_0.7.0</div>
            </div>
            <div class="status_title">
                Install Date
                <div class="status_subtitle">3/21/2018</div>
            </div>
            <div class="status_title">
                Ip Address
                <div class="status_subtitle">192.34.44.32</div>
            </div>
            <div class="status_title">
                Mac Address
                <div class="status_subtitle">192.34.44.32</div>
            </div>
            -->


            <div id="main_body_title">Available Software</div>
            <div id="main_body_sw">
                <!--<div class="available_sw">automate</div>-->
            </div>
        </div>
    </div>
</body>


<script>
    const getAvailableSoftware = () => new Promise((resolve, reject) => {
       fetch('/software').then(response => {
           response.json().then(resolve).catch(reject);
       }).catch(reject);
    });

    const setSoftwareAsActive = () => new Promise((resolve, reject) => {

    });

    const addSoftware = software => {
        const main_sw = document.querySelector('#main_body_sw');
        main_sw.innerText = '';
        const elements = software.map(createSoftwareElements);
        elements.forEach(element => {
           main_sw.appendChild(element);
        });
    };
    const createSoftwareElements = softwareElement => {
      console.log(softwareElement);
      const element = document.createElement('div');
      element.className = 'available_sw';
      element.innerText =  softwareElement.name;
      element.style = `background: ${softwareElement.imageUrl}; background-size: cover;`;
      return element;
    };


    getAvailableSoftware().then(softwareList => {
        addSoftware(softwareList);
    });

</script>
</html>




